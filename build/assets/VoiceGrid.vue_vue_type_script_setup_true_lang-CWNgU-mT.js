import{b as j,_ as B,a as P}from"./AvatarImage.vue_vue_type_script_setup_true_lang-C80rwI7h.js";import{_ as y}from"./index-DT0_wXCD.js";import{_ as G}from"./Progress.vue_vue_type_script_setup_true_lang-DXQ_a_UR.js";import{u as N}from"./useGlobalPlayer-B-WgWXrj.js";import{u as T}from"./useLocale-Dmsp2NC3.js";import{u as q}from"./cartStore-sIhTJHLb.js";import{d as h,m as _,c,e as a,a as u,w as m,b as t,l as f,t as i,r as k,f as C,o as l,F as z,s as F}from"./app-n_fLUIe1.js";import{t as L}from"./index-OGXtXS_A.js";import{c as O}from"./index-DZwn_gST.js";const S={class:"space-y-2 rounded border p-4 dark:border-primary/10 dark:bg-primary/5"},A={class:"flex gap-2"},D={class:"space-y-1"},E=["href"],I={class:"text-xs"},U={class:"flex items-center gap-1 text-xs"},H={key:0,class:"flex items-center gap-2"},J={key:0,class:"i-pause"},K={key:1,class:"i-play"},M={class:"text-xs text-gray-500"},Q={key:1,class:"rounded border p-2 text-xs text-destructive"},R={class:"flex items-center justify-between"},W={class:"text-xs"},X=h({__name:"Voice",props:{voice:{type:Object,required:!0}},setup(e){const o=e,{T:n,t:v,locale:x}=T(),d=N();function $(){d.play({id:o.voice.id??"tmp",src:"/storage/samples/"+o.voice.sample.file_url,title:o.voice.title,artist:o.voice.user.name})}const g=_(()=>d.progress_percent.value(o.voice.id)),p=q(),V=b=>{p.addVoice(b),L.success(n("voice_added_to_cart"),{action:{label:n("checkout_order"),onClick:()=>k.visit(O.url()+"?cart_voices="+p.asString())}})},w=_(()=>typeof o.voice.title=="object"?o.voice.title[x]:o.voice.title);return(b,s)=>(l(),c("div",S,[a("div",A,[u(t(P),{class:"flex h-10 w-10 cursor-pointer items-center justify-center bg-sidebar-accent",onClick:s[0]||(s[0]=r=>t(k).visit("artist/"+e.voice.user.id))},{default:m(()=>[u(t(j),{src:e.voice.user.avatar.url,alt:"voice.user.avatar.initials"},null,8,["src"]),u(t(B),{class:"text-xs font-bold"},{default:m(()=>[f(i(e.voice.user.avatar.initials),1)]),_:1})]),_:1}),a("div",D,[a("a",{href:"artist/"+e.voice.user.id},i(e.voice.user.name),9,E),a("p",I,i(w.value),1),a("p",U,[f(i(e.voice.average_rating)+" ",1),s[5]||(s[5]=a("span",{class:"i-star text-orange-400"},null,-1)),f(" "+i(t(v)("from"))+" "+i(e.voice.orders_count)+" "+i(t(v)("orders"))+" ",1),s[6]||(s[6]=a("span",{class:"i-heart text-red-500"},null,-1)),f(" "+i(e.voice.favorites_count),1)])])]),e.voice.sample?(l(),c("div",H,[(l(),C(t(y),{key:e.voice.id,type:"button",variant:"ghost",size:"icon",onClick:s[1]||(s[1]=r=>$()),class:"rounded-full border px-2 py-1"},{default:m(()=>{var r;return[((r=t(d).state.current)==null?void 0:r.id)===e.voice.id&&t(d).state.isPlaying?(l(),c("span",J)):(l(),c("span",K))]}),_:1})),a("p",M,i(t(d).progress_formatted.value(e.voice.id)),1),u(t(G),{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=r=>g.value=r),class:"flex-1",onClick:s[3]||(s[3]=r=>t(d).seek_click(r,e.voice.id))},null,8,["modelValue"]),a("div",null,[u(t(y),{as:"a",href:"/sample/download/"+e.voice.sample.id,variant:"ghost",size:"icon",class:"rounded-full border px-2 py-1 text-foreground"},{default:m(()=>[...s[7]||(s[7]=[a("span",{class:"i-download"},null,-1)])]),_:1},8,["href"])])])):(l(),c("div",Q,i(t(n)("no available demo file")),1)),a("div",R,[a("div",W,i(t(n)("artist_status"))+": "+i(e.voice.availability),1),a("div",null,[u(t(y),{onClick:s[4]||(s[4]=r=>V(e.voice.id)),disabled:t(p).existsInCard(e.voice.id)},{default:m(()=>[f(i(t(n)("order")),1)]),_:1},8,["disabled"])])])]))}}),Y={class:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3"},ce=h({__name:"VoiceGrid",props:{data:{type:Object,required:!0}},setup(e){return(o,n)=>{var v;return l(),c("div",Y,[(l(!0),c(z,null,F((v=e.data)==null?void 0:v.data,x=>(l(),C(X,{key:x.id,voice:x},null,8,["voice"]))),128))])}}});export{ce as _};
