import{_ as v}from"./index-DT0_wXCD.js";import{c as w}from"./createLucideIcon-DJijaLzS.js";import{f as y,w as g,a as C,b as d,o as m,m as h,c as V,j as x,e as P,k as b,F as k,s as _,l as j,t as R,g as p,y as A}from"./app-n_fLUIe1.js";import{u as F,c as N}from"./index-CIgP3Fza.js";import{k as S}from"./index-BPSGGYO7.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=w("FilterXIcon",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]),M={__name:"ResetButton",setup(e){return(r,l)=>(m(),y(d(v),null,{default:g(()=>[C(d(I),{class:"w-4 h-4"})]),_:1}))}},D={key:0,class:"loteDataTablePager"},q={__name:"Pager",props:{data:{type:Object,default:null},offset:{type:Number,require:!0}},emits:["change"],setup(e,{emit:r}){const l=e,u=r,s=F("(max-width: 800px)"),n=h(()=>s.value?3:l.offset),t=h(()=>{if(!l.data.to)return[];let o=l.data.current_page-n.value;o<1&&(o=1);let i=o+n.value*2;i>=l.data.last_page&&(i=l.data.last_page);const c=[];for(let f=o;f<=i;f++)c.push(f);return c}),a=o=>{u("change",o)};return(o,i)=>e.data!==null&&t.value.length>1?(m(),V("div",D,[C(d(v),{size:"sm",variant:"outline",disabled:!(e.data.current_page>1),"aria-label":"Previous",onClick:i[0]||(i[0]=b(c=>a(e.data.current_page-1),["prevent"]))},{default:g(()=>[...i[2]||(i[2]=[P("span",{class:"i-chevronLeft"},null,-1)])]),_:1},8,["disabled"]),(m(!0),V(k,null,_(t.value,c=>(m(),y(d(v),{size:"sm",variant:e.data.current_page===c?"default":"outline",onClick:b(f=>a(c),["prevent"]),key:c},{default:g(()=>[j(R(c),1)]),_:2},1032,["variant","onClick"]))),128)),e.data.current_page<e.data.last_page?(m(),y(d(v),{key:0,size:"sm",variant:"outline","aria-label":"Next",onClick:i[1]||(i[1]=b(c=>a(e.data.current_page+1),["prevent"]))},{default:g(()=>[...i[3]||(i[3]=[P("span",{class:"i-chevronRight"},null,-1)])]),_:1})):x("",!0)])):x("",!0)}};function z(e){return{filtersCount:h(()=>Object.keys(e.value.urlParams).filter(n=>{const t=e.value.urlParams[n]===""||e.value.urlParams[n].length===0;return n.startsWith("filters")&&!t}).length),setFilter:(s,n)=>{delete e.value.urlParams.page,s&&(s==="limit"?e.value.urlParams.limit=n:n===""?delete e.value.urlParams["filters["+s+"]"]:e.value.urlParams["filters["+s+"]"]=n)},getFilter:s=>e.value.urlParams["filters["+s+"]"]}}function E(e,r){const l=N(e,{columns:[],columnsVisibility:[],urlParams:{search:"",json:!0}},localStorage,{mergeDefaults:!0}),u=()=>{l.value={columns:[],columnsVisibility:[],urlParams:{search:"",json:!0}},n()},s=()=>{u(),window.location.href=window.location.pathname},n=()=>{r.forEach(t=>{let a=Object.keys(t)[0];l.value.urlParams[a]=t[a]})};return{state:l,resetState:u,hardReset:s,setDefaultUrlParams:n}}function T(e){return{toggleColumnVisibility:t=>{e.value.columnsVisibility[t]=!e.value.columnsVisibility[t]},resetColumnVisibility:()=>{e.value.columnsVisibility=Array(e.value.columns.length).fill(!0)},isColumnVisible:t=>{let a=e.value.columns.findIndex(o=>o.label===t);return a===-1||e.value.columnsVisibility===void 0?!0:e.value.columnsVisibility[a]??!0},isColumnIndexVisible:t=>t===-1||e.value.columnsVisibility===void 0?!0:e.value.columnsVisibility[t]??!0,isSortedColumn:t=>{let a=e.value.columns[t];return a!=null&&a.sort?a.sort===e.value.urlParams.s:!1}}}function U(){const e=p([]);return{toggleHiddenRow:l=>{const u=l+1;e.value.includes(u)?e.value.splice(e.value.indexOf(u),1):e.value.push(u)},selectedHiddenRowsIndexes:e}}function X(e,r){const l=p([]);return{toggle:t=>{if(r){const a=l.value.findIndex(o=>Number(o)===Number(t));a>-1?l.value.splice(a,1):l.value.push(t)}},selectAll:()=>{l.value=l.value.concat(e.value.data.map(t=>t.id).filter(t=>l.value.indexOf(t)<0))},deselectAll:()=>{l.value.length=0},selected:l}}function Q(e,r,l){return{setAction:s=>{if(s==="print"||s==="export"){let{json:n,...t}=e.value.urlParams;const a=new URLSearchParams(t)+"&action="+s;window.open(l+"/?"+a)}else e.value.urlParams.action=s,r()}}}function W(e,r,l){const u=p(null),s=A(null),n=p(!1);return{ajax:S(()=>{n.value=!0,axios.get(l.defaultUrl,{params:e.value.urlParams}).then(a=>{e.value.columns.length===0&&(e.value.columns=a.data.columns),(e.value.columnsVisibility===void 0||e.value.columnsVisibility.length===0)&&r(),s.value=a.data,n.value=!1,u.value=null},a=>{a.response?u.value=a.response.data.message:a.request?u.value="No response from server":u.value=a.message,n.value=!1})},100),errorMessage:u,data:s,loading:n}}export{M as _,z as a,U as b,W as c,X as d,Q as e,T as f,q as g,E as u};
