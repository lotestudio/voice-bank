import{A as f,m as o,a8 as m}from"./app-n_fLUIe1.js";let t=null,d=!1;const e=m({current:void 0,isPlaying:!1,duration:0,currentTime:0,volume:1,muted:!1,canPlay:!1,loading:!1,error:void 0});function a(){t||(t=new Audio,t.preload="metadata",t.crossOrigin="anonymous",t.volume=e.volume,t.muted=e.muted),!d&&t&&(d=!0,t.addEventListener("loadedmetadata",()=>{e.duration=isFinite(t.duration)?t.duration:0,e.loading=!1,e.canPlay=!0}),t.addEventListener("timeupdate",()=>{e.currentTime=t.currentTime||0}),t.addEventListener("play",()=>{e.isPlaying=!0,e.error=void 0}),t.addEventListener("pause",()=>{e.isPlaying=!1}),t.addEventListener("ended",()=>{e.isPlaying=!1}),t.addEventListener("waiting",()=>{e.loading=!0}),t.addEventListener("canplay",()=>{e.loading=!1,e.canPlay=!0}),t.addEventListener("error",()=>{e.loading=!1,e.error="Playback error",e.isPlaying=!1}))}async function p(r){if(a(),!t)return;const n=!e.current||e.current.src!==r.src;try{n?(t.paused||t.pause(),e.loading=!0,e.canPlay=!1,e.error=void 0,e.duration=0,e.currentTime=0,t.src=r.src,e.current=r,await t.play()):t.paused?await t.play():t.pause()}catch{e.error="Autoplay blocked or playback failed",e.loading=!1,e.isPlaying=!1}}function g(){a(),t&&!t.paused&&t.pause()}function y(){a(),t&&(t.pause(),t.currentTime=0,e.isPlaying=!1)}function l(r){a(),t&&(t.currentTime=Math.max(0,Math.min(r,e.duration||r)))}function v(r){a();const n=Math.max(0,Math.min(r,1));e.volume=n,t&&(t.volume=n)}function P(){a(),e.muted=!e.muted,t&&(t.muted=e.muted)}const T=o(()=>e.duration?e.currentTime/e.duration:0),h=o(()=>r=>{var n;return e.duration&&(((n=e.current)==null?void 0:n.id)===r||r===void 0)?e.currentTime/e.duration*100:0}),E=o(()=>r=>{var n;if(((n=e.current)==null?void 0:n.id)===r||r===void 0){const i=Math.floor(e.currentTime/60),u=Math.floor(e.currentTime%60);return`${i}:${u.toString().padStart(2,"0")}`}return"00:00"}),L=(r,n)=>{var i;if(((i=e.current)==null?void 0:i.id)===n){const s=r.currentTarget.getBoundingClientRect(),c=(r.clientX-s.left)/s.width*100/100*e.duration;l(c)}};function b(){return a(),f(()=>{}),{state:e,progress:T,progress_percent:h,progress_formatted:E,play:p,pause:g,stop:y,seek:l,seek_click:L,setVolume:v,toggleMute:P}}export{b as u};
