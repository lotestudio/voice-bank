import{u as $,a as A,b as B,c as j,d as w,e as D,f as R,g as z}from"./useAjax-XmtRkf0g.js";import{d as M,M as q,m as N,B as _,z as x,c as i,j as n,C as d,f as E,q as H,b as e,t as L,o}from"./app-n_fLUIe1.js";const T={key:1},G={key:2,class:"w-full bg-red-100 z-10 p-4 rounded"},K=M({__name:"DataList",props:{defaultUrl:{type:String,require:!0},offset:{type:Number,default:8},defaultUrlParams:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},filtersContainerClasses:{type:String,default:""}},setup(u,{expose:g}){const a=u,{state:s,resetState:b,hardReset:P,setDefaultUrlParams:v}=$(a.defaultUrl,a.defaultUrlParams),{filtersCount:k,setFilter:S,getFilter:V}=A(s),{toggleColumnVisibility:h,resetColumnVisibility:m}=R(s);B();const{ajax:l,errorMessage:f,data:t}=j(s,m,a);w(t,a.selectable);const{setAction:F}=D(s,l,a.defaultUrl);return q("state",s),N(()=>t.value===null?null:t.value.data),_(()=>s.value.urlParams,()=>{l()},{deep:!0}),x(()=>{v(),l()}),g({refresh:l}),(r,c)=>{var p,y,C;return o(),i("div",null,[r.$slots.filters?(o(),i("div",{key:0,class:H(u.filtersContainerClasses)},[d(r.$slots,"filters",{columns:e(s).columns,urlParams:e(s).urlParams,setAction:e(F),setFilter:e(S),getFilter:e(V),resetFilters:e(b),hardReset:e(P),columnsVisibility:e(s).columnsVisibility,toggleColumnVisibility:e(h),resetColumnVisibility:e(m),total:(p=e(t))==null?void 0:p.total,filtersCount:e(k)})],2)):n("",!0),(y=e(t))!=null&&y.info&&r.$slots.info?(o(),i("div",T,[d(r.$slots,"info",{info:(C=e(t))==null?void 0:C.info})])):n("",!0),e(f)?(o(),i("div",G,L(e(f)),1)):n("",!0),d(r.$slots,"default",{items:e(t),ajax:e(l),urlParams:e(s).urlParams}),e(t)!==null&&e(f)===null?(o(),E(z,{key:3,data:e(t),offset:u.offset,onChange:c[0]||(c[0]=U=>e(s).urlParams.page=U)},null,8,["data","offset"])):n("",!0)])}}});export{K as _};
