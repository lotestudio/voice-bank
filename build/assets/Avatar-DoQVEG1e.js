import{d as x,g,c as y,a as s,e as n,f as w,j as $,b as a,w as p,t as h,l as k,L as C,o as d,u as j,h as S,F as B}from"./app-n_fLUIe1.js";import{_ as F}from"./SiteLayout.vue_vue_type_script_setup_true_lang-r9vm1p6d.js";import{_ as I}from"./ProfileSubMenu.vue_vue_type_script_setup_true_lang-D9o2pp9b.js";import{_ as L}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-z9VWAOuO.js";import{a as N,b as V,_ as q}from"./AvatarImage.vue_vue_type_script_setup_true_lang-C80rwI7h.js";import{t as b}from"./index-OGXtXS_A.js";import{_ as A}from"./index-DT0_wXCD.js";import{u as D}from"./useLocale-Dmsp2NC3.js";import{u as E}from"./useAuth-B1YEDPOt.js";import"./index-CyCFDcJn.js";import"./DialogTitle-C2oEofh3.js";import"./useForwardExpose-D7BoLfg_.js";import"./index-BPSGGYO7.js";import"./createLucideIcon-DJijaLzS.js";import"./index-CIgP3Fza.js";import"./index-CMWG4mbA.js";import"./index-vTXXVVPS.js";import"./AppearanceTabs.vue_vue_type_script_setup_true_lang-_dHcfhPm.js";import"./cartStore-sIhTJHLb.js";import"./index-DZwn_gST.js";import"./LoteAlertDialog.vue_vue_type_script_setup_true_lang-CPKDbE-E.js";import"./DialogTrigger-CcU0OeBG.js";import"./SubMenuLayout.vue_vue_type_script_setup_true_lang-p5kf349q.js";const O={class:"flex flex-col gap-4"},R={class:"flex flex-col items-center gap-2"},T={class:"font-bold"},U=["disabled"],P=x({__name:"AvatarUpload",props:{fallback_text:{type:String,required:!0},avatar_url:{type:[String,null]},post_data:{type:Object,default:()=>({})},show_remove_button:{type:Boolean,default:!1},post_url:{type:String,default:"/avatar_upload"}},setup(i){const o=i,l=g(o.avatar_url),e=g(!1),f=async r=>{const t=r.target;if(t.files&&t.files.length>0){const u=t.files[0];l.value=URL.createObjectURL(u);const v=new FormData;v.append("avatar",u),await c(v)}},_=async()=>{l.value=null,await c(new FormData)},c=async r=>{e.value=!0,Object.keys(o.post_data).forEach(t=>r.append(t,o.post_data[t]));try{await C.post(o.post_url,r,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{b.success(t.data.message),e.value=!1})}catch(t){b.error("Error uploading avatar:"+t.toString()),e.value=!1}},{T:m}=D();return(r,t)=>(d(),y("div",O,[s(a(N),{class:"flex aspect-square h-auto w-full cursor-pointer items-center justify-center bg-sidebar-accent",onClick:t[0]||(t[0]=u=>e.value?null:r.$refs.fileInput.click())},{default:p(()=>[s(a(V),{src:l.value??"",alt:i.fallback_text,class:"object-cover"},null,8,["src","alt"]),s(a(q),null,{default:p(()=>[n("div",R,[t[2]||(t[2]=n("span",{class:"i-image_plus"},null,-1)),n("p",T,h(i.fallback_text),1)])]),_:1})]),_:1}),n("input",{type:"file",disabled:e.value,onChange:t[1]||(t[1]=u=>f(u)),ref:"fileInput",class:"hidden"},null,40,U),i.show_remove_button&&l.value?(d(),w(a(A),{key:0,disabled:e.value,onClick:_},{default:p(()=>[k(h(a(m)("remove_photo")),1)]),_:1},8,["disabled"])):$("",!0)]))}}),M={class:"flex max-w-xl flex-col gap-8"},z={class:"space-y-6"},G={class:"max-w-xs"},mt=x({__name:"Avatar",setup(i){var _,c;const{user:o}=E(),l=j(),e=(_=l.props.heading)==null?void 0:_.title,f=(c=l.props.heading)==null?void 0:c.description;return(m,r)=>(d(),y(B,null,[s(a(S),{title:"SideMenu"}),s(F,null,{default:p(()=>[s(I,{sub_page:"avatar"},{default:p(()=>[n("div",M,[n("div",z,[s(L,{title:a(e),description:a(f)},null,8,["title","description"]),n("div",G,[s(P,{fallback_text:a(o).avatar.initials,avatar_url:a(o).avatar.url,show_remove_button:""},null,8,["fallback_text","avatar_url"])])])])]),_:1})]),_:1})],64))}});export{mt as default};
