import{E as F,g as R,B as K,c as p,o as m,F as N,s as B,G as A,q as L,b as i,k as M,e as d,l as V,t as $,m as k,i as P,a as n,w as x,d as q,r as E,f as G,u as T,h as I}from"./app-n_fLUIe1.js";import{_ as H}from"./SiteLayout.vue_vue_type_script_setup_true_lang-r9vm1p6d.js";import{_ as J}from"./ProfileSubMenu.vue_vue_type_script_setup_true_lang-D9o2pp9b.js";import{_ as Q}from"./BackButton.vue_vue_type_script_setup_true_lang-tfmRxzxi.js";import{_ as W}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-z9VWAOuO.js";import{a as X,b as Y,_ as Z}from"./AvatarImage.vue_vue_type_script_setup_true_lang-C80rwI7h.js";import{_ as C}from"./index-DT0_wXCD.js";import{_ as ee}from"./Progress.vue_vue_type_script_setup_true_lang-DXQ_a_UR.js";import{u as te}from"./useGlobalPlayer-B-WgWXrj.js";import{u as U}from"./useLocale-Dmsp2NC3.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{q as j,a as re}from"./index-CMWG4mbA.js";import{_ as oe}from"./Textarea.vue_vue_type_script_setup_true_lang-Cd6DmKRL.js";import{t as z}from"./index-OGXtXS_A.js";import"./index-CyCFDcJn.js";import"./DialogTitle-C2oEofh3.js";import"./useForwardExpose-D7BoLfg_.js";import"./index-BPSGGYO7.js";import"./createLucideIcon-DJijaLzS.js";import"./index-CIgP3Fza.js";import"./index-vTXXVVPS.js";import"./AppearanceTabs.vue_vue_type_script_setup_true_lang-_dHcfhPm.js";import"./cartStore-sIhTJHLb.js";import"./index-DZwn_gST.js";import"./LoteAlertDialog.vue_vue_type_script_setup_true_lang-CPKDbE-E.js";import"./DialogTrigger-CcU0OeBG.js";import"./SubMenuLayout.vue_vue_type_script_setup_true_lang-p5kf349q.js";import"./nullish-CHIgUVhi.js";const se=["aria-label"],le=["aria-checked","tabindex","onClick","onKeydown","onMousemove","title"],ae={class:"visually-hidden"},ne={__name:"StarRating",props:{modelValue:{type:Number,default:0},max:{type:Number,default:5},label:{type:String,default:"Rating"},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=e,v=t,{modelValue:o,max:a,readonly:u}=F(r),c=R(o.value),s=R(0);K(o,h=>c.value=h);function l(h){u.value||(c.value=h,v("update:modelValue",h),v("change",h))}function _(h){u.value||(s.value=h)}function D(){s.value=0}return(h,O)=>(m(),p("div",{class:"star-rating",role:"radiogroup","aria-label":e.label,onMouseleave:D},[(m(!0),p(N,null,B(i(a),y=>(m(),p("button",{key:y,class:L(["star",{filled:(s.value||c.value)>=y}]),role:"radio","aria-checked":c.value===y,tabindex:y===1?0:-1,onClick:S=>l(y),onKeydown:[A(M(S=>l(y),["prevent"]),["space"]),A(M(S=>l(y),["prevent"]),["enter"])],onMousemove:S=>_(y),title:y+" / "+i(a)},[d("span",ae,$(y)+" of "+$(i(a)),1),O[0]||(O[0]=V(" â˜… ",-1))],42,le))),128))],40,se))}},de=ie(ne,[["__scopeId","data-v-6c77cc06"]]),b=e=>({url:b.url(e),method:"get"});b.definition={methods:["get","head"],url:"/profile/reviews"};b.url=e=>b.definition.url+j(e);b.get=e=>({url:b.url(e),method:"get"});b.head=e=>({url:b.url(e),method:"head"});const w=e=>({url:w.url(e),method:"get"});w.definition={methods:["get","head"],url:"/profile/reviews/create"};w.url=e=>w.definition.url+j(e);w.get=e=>({url:w.url(e),method:"get"});w.head=e=>({url:w.url(e),method:"head"});const g=e=>({url:g.url(e),method:"post"});g.definition={methods:["post"],url:"/profile/reviews"};g.url=e=>g.definition.url+j(e);g.post=e=>({url:g.url(e),method:"post"});const f=(e,t)=>({url:f.url(e,t),method:"put"});f.definition={methods:["put","patch"],url:"/profile/reviews/{review}"};f.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={review:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={review:e.id}),Array.isArray(e)&&(e={review:e[0]}),e=re(e);const r={review:typeof e.review=="object"?e.review.id:e.review};return f.definition.url.replace("{review}",r.review.toString()).replace(/\/+$/,"")+j(t)};f.put=(e,t)=>({url:f.url(e,t),method:"put"});f.patch=(e,t)=>({url:f.url(e,t),method:"patch"});Object.assign(b,b),Object.assign(w,w),Object.assign(g,g),Object.assign(f,f);const ue={class:"flex items-center gap-2"},ce={__name:"VoiceRate",props:{review:{type:Object,default:null},voice_id:{type:Number,default:null},order_id:{type:Number,default:null}},setup(e){var a;const t=e,r=k(()=>t.review),v=P({rating:((a=r.value)==null?void 0:a.rating)??0,voice_id:t.voice_id,order_id:t.order_id});function o(){t.review?v.put(f.url(t.review.id),{}):t.voice_id&&t.order_id&&v.post(g.url(),{preserveScroll:!0,onSuccess:()=>{}})}return(u,c)=>(m(),p("div",ue,[c[1]||(c[1]=d("div",null,"Rate this voice:",-1)),n(de,{modelValue:i(v).rating,"onUpdate:modelValue":c[0]||(c[0]=s=>i(v).rating=s),onChange:o,max:5,label:"Ad voice rating"},null,8,["modelValue"])]))}},me={class:"flex items-center gap-2"},ve={class:"flex justify-end gap-2 mt-4"},pe={__name:"VoiceReview",props:{review:{type:Object,default:null},voice_id:{type:Number,default:null},order_id:{type:Number,default:null}},setup(e){var u;const{locale:t}=U(),r=e,v=k(()=>r.review),o=P({comment:((u=v.value)==null?void 0:u.comment[t])??null,voice_id:r.voice_id,order_id:r.order_id}),a=(c=!1)=>{c&&(o.comment=""),r.review?o.put(f.url(r.review.id),{onSuccess:()=>{z.success("Comment saved!")}}):r.voice_id&&r.order_id&&o.post(g.url(),{preserveScroll:!0,onSuccess:()=>{z.success("Comment saved!")}})};return(c,s)=>(m(),p("div",null,[d("div",me,[s[3]||(s[3]=d("div",null,"Review:",-1)),n(i(oe),{modelValue:i(o).comment,"onUpdate:modelValue":s[0]||(s[0]=l=>i(o).comment=l),class:"field-sizing-content"},null,8,["modelValue"])]),d("div",ve,[n(i(C),{variant:"destructive",size:"sm",onClick:s[1]||(s[1]=l=>a(!0))},{default:x(()=>[...s[4]||(s[4]=[V("Delete",-1)])]),_:1}),n(i(C),{size:"sm",onClick:s[2]||(s[2]=l=>a())},{default:x(()=>[...s[5]||(s[5]=[V("Save",-1)])]),_:1})])]))}},fe={class:"space-y-4 rounded border p-4 dark:border-primary/10 dark:bg-primary/5"},_e={class:"lg:flex gap-2"},ye={class:"flex gap-2 lg:mb-0 mb-4"},be={class:"space-y-1"},we=["href"],ge={class:"text-xs"},he={key:0,class:"flex items-center gap-2"},xe={key:0,class:"i-pause"},$e={key:1,class:"i-play"},ke={class:"text-xs text-gray-500"},Ve={key:1,class:"flex-1 flex items-center rounded border p-2 text-xs text-destructive"},Ce=q({__name:"Voice",props:{voice:{type:Object,required:!0},review:{type:Object,default:null},order_id:{type:Number,required:!0}},setup(e){const t=e,{T:r,locale:v}=U(),o=te();function a(){o.play({id:t.voice.id??"tmp",src:"/storage/samples/"+t.voice.sample.file_url,title:t.voice.title,artist:t.voice.user.name})}const u=k(()=>o.progress_percent.value(t.voice.id)),c=k(()=>typeof t.voice.title=="object"?t.voice.title[v]:t.voice.title);return(s,l)=>(m(),p("div",fe,[d("div",_e,[d("div",ye,[n(i(X),{class:"flex h-10 w-10 cursor-pointer items-center justify-center bg-sidebar-accent",onClick:l[0]||(l[0]=_=>i(E).visit("artist/"+e.voice.user.id))},{default:x(()=>[n(i(Y),{src:e.voice.user.avatar.url,alt:"voice.user.avatar.initials"},null,8,["src"]),n(i(Z),{class:"text-xs font-bold"},{default:x(()=>[V($(e.voice.user.avatar.initials),1)]),_:1})]),_:1}),d("div",be,[d("a",{href:"artist/"+e.voice.user.id},$(e.voice.user.name),9,we),d("p",ge,$(c.value),1)])]),e.voice.sample?(m(),p("div",he,[(m(),G(i(C),{key:e.voice.id,type:"button",variant:"ghost",size:"icon",onClick:l[1]||(l[1]=_=>a()),class:"rounded-full border px-2 py-1"},{default:x(()=>{var _;return[((_=i(o).state.current)==null?void 0:_.id)===e.voice.id&&i(o).state.isPlaying?(m(),p("span",xe)):(m(),p("span",$e))]}),_:1})),d("p",ke,$(i(o).progress_formatted.value(e.voice.id)),1),n(i(ee),{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=_=>u.value=_),class:"flex-1",onClick:l[3]||(l[3]=_=>i(o).seek_click(_,e.voice.id))},null,8,["modelValue"]),d("div",null,[n(i(C),{as:"a",href:"/sample/download/"+e.voice.sample.id,variant:"ghost",size:"icon",class:"rounded-full border px-2 py-1 text-foreground"},{default:x(()=>[...l[4]||(l[4]=[d("span",{class:"i-download"},null,-1)])]),_:1},8,["href"])])])):(m(),p("div",Ve,$(i(r)("no available demo file")),1))]),n(ce,{review:e.review,order_id:e.order_id,voice_id:e.voice.id},null,8,["review","order_id","voice_id"]),n(pe,{review:e.review,order_id:e.order_id,voice_id:e.voice.id},null,8,["review","order_id","voice_id"])]))}}),je={class:"space-y-8"},it=q({__name:"Order",setup(e){const t=T(),r=k(()=>t.props.order),v=o=>{var a;return((a=r.value.reviews)==null?void 0:a.find(u=>u.voice_id===o))??null};return(o,a)=>(m(),p(N,null,[n(i(I),{title:"SideMenu"}),n(H,null,{default:x(()=>[n(J,{sub_page:"orders"},{default:x(()=>[d("div",je,[n(W,{title:r.value.title,description:r.value.description},null,8,["title","description"]),a[0]||(a[0]=d("div",null,[d("h3",{class:"mb-0.5 text-base font-medium"},"Voice Cast:")],-1)),(m(!0),p(N,null,B(r.value.voices,u=>(m(),p("div",{key:u.id,class:"space-y-4"},[n(Ce,{voice:u,order_id:r.value.id,review:v(u.id)},null,8,["voice","order_id","review"])]))),128)),n(Q)])]),_:1})]),_:1})],64))}});export{it as default};
